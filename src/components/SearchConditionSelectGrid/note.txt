🔹 특징
자동 + 수동 조회 하이브리드 UX

조건 변경 → debounce 자동 조회

조회 버튼 → 서버에서 최신 데이터 강제 조회

조회 상태 표시

전체 Loading Overlay

결과 없음 메시지

백그라운드 조회 중 작은 배너

React Query 캐싱 적용 + UX 개선

캐시 데이터 즉시 표시

백그라운드 최신화

keepPreviousData로 Grid 깜빡임 방지

useImmer로 조회조건 상태 관리

각 select는 코드값, 사용유무, 추가 파라미터 전달 가능

Grid row 변경 애니메이션

조회 조건 초기화 버튼

조회 중 조건 변경 막기

조회 성공/실패 토스트 알림

🔹 실무용 UX 개선 포인트
조회조건 변경 → 자동 debounce 조회

조회 버튼 → 수동 강제 조회

조회 중 UI 잠금 → select, datepicker, 체크박스, 버튼 disable

조회 상태 표시 → Loading, Empty, Background fetching 표시

Grid row 변경 애니메이션 (animateRows={true})

토스트 알림 → 조회 성공/실패 알림

React Query 캐싱 적용 → 빠른 화면 표시 + 백그라운드 최신화


npm install @tanstack/react-query
npm install lodash
npm install react-datepicker

react-datepicker는 날짜 조작을 위해 **date-fns**나 **moment**와 같은 외부 라이브러리에 의존합니다. 이 중 가장 가볍고 권장되는 라이브러리는 **date-fns**입니다.
npm install date-fns
설치 후 react-datepicker 컴포넌트에 dateFormat 및 기타 속성을 적용할 때 date-fns 함수를 사용하게 됩니다.

react-datepicker가 올바르게 표시되려면 전용 CSS 파일을 프로젝트의 최상위 파일(예: App.js 또는 index.js)에 임포트해야 합니다.
import 'react-datepicker/dist/react-datepicker.css';

## 비교적 간단한 화면으로 전체 소스 다 적용해서 화면 한 페이지 만들어보기
## 멀티셀렉트 조회조건 만들어야 함.

## GridView.jsx 동작 설정
✅ 1. 자동조회(autoFetch=true) 시 정상 동작 여부
✔ 동작 흐름
부모에서 filters가 변경됨

useEffect에서 debouncedSet(filters) 실행

500ms 후 debouncedFilters 변경

queryKey = ['gridData', JSON.stringify(debouncedFilters)]가 변경됨

enabled: autoFetch === true 이므로 useQuery가 자동 실행됨

✅ 2. 자동조회 ON/OFF 토글 시 동작
autoFetch={false}인 경우:

enabled: autoFetch
때문에 자동조회가 완전히 멈춥니다.

하지만 "manualTrigger"를 이용한 수동조회는 완전히 별도로 작동합니다.

✅ 3. manualTrigger 수동조회 정상 동작 확인
이 코드:

useEffect(() => {
  if (manualTrigger) {
    refetch();
  }
}, [manualTrigger, refetch]);
✔ 수동 조회 동작 방식
부모 컴포넌트에서 버튼 클릭 등으로
setManualTrigger(prev => !prev)
이렇게 토글해주면 됨.

manualTrigger 값이 바뀜 → useEffect 작동 → refetch() 실행

autoFetch=false여도 refetch는 무조건 실행됨


  "dependencies": {
    "@tanstack/react-query": "^5.90.10",
    "ag-grid-community": "^34.3.1",
    "ag-grid-react": "^34.3.1",
    "axios": "^1.13.2",
    "date-fns": "^4.1.0",
    "json-server": "^1.0.0-beta.3",
    "lodash": "^4.17.21",
    "react": "^19.2.0",
    "react-datepicker": "^8.9.0",
    "react-dom": "^19.2.0",
    "react-icons": "^5.5.0",
    "react-router": "^7.9.6",
    "uuid": "^13.0.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@types/react": "^19.2.2",
    "@types/react-dom": "^19.2.2",
    "@vitejs/plugin-react-swc": "^4.2.1",
    "autoprefixer": "^10.4.22",
    "eslint": "^9.39.1",
    "eslint-config-prettier": "^10.1.8",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "postcss": "^8.5.6",
    "prettier": "3.6.2",
    "tailwindcss": "^3.4.18",
    "vite": "^7.2.2"
  }


  =====================================================================================

  src/
 ├─ api/
 │   └─ api.js
 ├─ hooks/
 │   ├─ useFilters.js
 │   ├─ usePrevious.js
 │   ├─ useRowHighlight.js
 │   ├─ useGridState.js
 ├─ components/
 │   ├─ Filters.jsx
 │   ├─ GridView.jsx
 │   ├─ AutoFetchToggle.jsx
 │   ├─ SearchButton.jsx
 │   ├─ QueryBoundary.jsx
 ├─ App.jsx
 └─ main.jsx

✔ Suspense 적용
✔ 자동조회/수동조회
✔ debounce filters별 독립처리
✔ 이전 필터 비교 후 변경된 경우만 조회
✔ Grid 상태 localStorage 저장
✔ 변경된 행 강조
✔ 토스트
✔ keepPreviousData
✔ 모든 Select + Date + Checkbox + Radio 포함
✔ 실무형 구조로 파일 분리


============================================================
Large Dataset 최적화 버전이라는 건
AG-Grid에 아주 많은 데이터(수만 ~ 수백만 건)를 표시할 때 성능이 급격히 느려지지 않도록 최적화된 방식을 말해.

아주 쉽게 설명해볼게.

✅ Large Dataset 최적화 버전이란?
AG-Grid는 기본적으로 “전부 다 가져와서 보여주는 방식”으로도 동작함.

하지만 데이터가 너무 많아지면:

화면 렌더링이 느려지고

브라우저 메모리가 터지고

스크롤이 턱턱 끊기고

서버 응답도 무거워지고

필터/정렬 처리도 매우 느려짐

그래서 대량 데이터를 위한 특별한 모드들이 존재함.
이렇게 "대량 데이터에 특화된 모드"를 통칭해서 우리가 흔히

👉 AG-Grid Large Dataset Optimized Version

이라고 부르는 거야.

🔥 어떤 기능들이 Large Dataset 최적화 모드야?
아래 3개가 대량 데이터 처리의 핵심 기능이야.

1) 🔹 Server-Side Row Model (SSR / Enterprise Only)
대량 데이터(10만 ~ 1000만 건)를 위한 최상위 모드

스크롤 위치에 따라 서버에서 필요한 데이터만 가져옴

정렬/필터링도 서버에서 처리

메모리에 로우 전체를 보관하지 않음

가상화된 방식으로 동작 → 부하 매우 적음

큰 기업 시스템에서 거의 무조건 사용됨

2) 🔹 Infinite Row Model (무료 버전 가능)
일반 유저가 가장 많이 사용하는 방식

화면에서 필요할 때마다 서버에서 ‘다음 페이지’를 요청

AG-Grid가 내부적으로 페이징 없이 무한 스크롤처럼 동작

데이터 누적 가능

SSR보다 단순하지만 대량 데이터에서도 잘 버팀

3) 🔹 Client-Side Row Model + Row Virtualization
기본 모드지만 아래 최적화 적용 시 꽤 성능 좋음

rowBuffer 줄이기

DOM 가상화

1000~3000건 수준은 전혀 문제 없음

필터/정렬은 클라이언트에서 수행

하지만 2~3만 건 넘으면 버벅거림이 생김.

✔ 그러면 "Large Dataset 최적화 버전"이란?
👉 "대량 데이터를 효과적으로 다루기 위해
AG-Grid가 제공하는 최적화된 데이터 로딩/렌더링 방식"

즉, 아래 기능들 중 하나 이상을 사용하는 것:

항목	설명
Infinite Scroll Mode	필요한 만큼만 가져오고, 페이지를 쌓는 방식
Server-Side Row Model	대량 데이터용 완전한 서버 기반 모델
Row Virtualization	화면에 표시되는 DOM만 렌더링
Lazy Load / Chunk Load	데이터 덩어리 단위로 로드
Pagination + keep-alive	기존 데이터 캐싱 후 빠른 전환
Debounced Filtering	필터 입력 시 서버 부담 완화
✔ AG-Grid 화면에서 Large Dataset 최적화 모드를 쓸 필요가 있을까?
👉 데이터가 5,000건 이하 → 필요 없음
기본 Client-Side Row Model로 충분

👉 5,000 ~ 20,000건 → Infinite Scroll 추천
👉 50,000건 이상 → Server-Side Row Model (Enterprise)